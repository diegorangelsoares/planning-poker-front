{"ast":null,"code":"var _jsxFileName = \"/home/diego-freire/Documentos/projetos_diego/Planning-Poker/planning-poker-front/src/components/PokerRoom.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io('http://localhost:4000');\nconst cards = Array.from({\n  length: 31\n}, (_, i) => i * 2);\nfunction PokerRoom() {\n  _s();\n  const {\n    state\n  } = useLocation();\n  const {\n    roomId\n  } = useParams();\n  const [players, setPlayers] = useState([]);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [votes, setVotes] = useState({});\n  const [revealed, setRevealed] = useState(false);\n  useEffect(() => {\n    const name = (state === null || state === void 0 ? void 0 : state.playerName) || 'Host';\n    socket.emit('joinRoom', {\n      roomId,\n      name\n    });\n    socket.on('players', setPlayers);\n    socket.on('votes', setVotes);\n    return () => socket.disconnect();\n  }, [roomId, state]);\n  const handleVote = card => {\n    setSelectedCard(card);\n    socket.emit('vote', {\n      roomId,\n      card\n    });\n  };\n  const handleRevealVotes = () => {\n    setRevealed(true);\n  };\n  const calculateAverage = () => {\n    const values = Object.values(votes);\n    if (values.length === 0) return 0;\n    return (values.reduce((a, b) => a + b, 0) / values.length).toFixed(2);\n  };\n  const allVoted = players.length > 0 && players.every(p => votes[p.id] !== undefined);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"room-title\",\n      children: (state === null || state === void 0 ? void 0 : state.roomName) || 'Sala'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"players\",\n      children: players.map(player => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player\",\n        children: [player.name, \" \", revealed && votes[player.id] !== undefined ? `: ${votes[player.id]}` : 'üÉè']\n      }, player.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-grid\",\n      children: cards.map(card => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          backgroundColor: selectedCard === card ? '#4f46e5' : 'white',\n          color: selectedCard === card ? 'white' : 'black'\n        },\n        onClick: () => handleVote(card),\n        children: card\n      }, card, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), allVoted && !revealed && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"reveal-button\",\n      onClick: handleRevealVotes,\n      children: \"Revelar Votos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }, this), revealed && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"result\",\n      children: [\"M\\xE9dia: \", calculateAverage()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n}\n_s(PokerRoom, \"u2OsTsEAI66fpR657gHIwq34Qdo=\", false, function () {\n  return [useLocation, useParams];\n});\n_c = PokerRoom;\nexport default PokerRoom;\nvar _c;\n$RefreshReg$(_c, \"PokerRoom\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","useParams","io","jsxDEV","_jsxDEV","socket","cards","Array","from","length","_","i","PokerRoom","_s","state","roomId","players","setPlayers","selectedCard","setSelectedCard","votes","setVotes","revealed","setRevealed","name","playerName","emit","on","disconnect","handleVote","card","handleRevealVotes","calculateAverage","values","Object","reduce","a","b","toFixed","allVoted","every","p","id","undefined","className","children","roomName","fileName","_jsxFileName","lineNumber","columnNumber","map","player","style","backgroundColor","color","onClick","_c","$RefreshReg$"],"sources":["/home/diego-freire/Documentos/projetos_diego/Planning-Poker/planning-poker-front/src/components/PokerRoom.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\nimport io from 'socket.io-client';\n\nconst socket = io('http://localhost:4000');\n\nconst cards = Array.from({ length: 31 }, (_, i) => i * 2);\n\nfunction PokerRoom() {\n    const { state } = useLocation();\n    const { roomId } = useParams();\n    const [players, setPlayers] = useState([]);\n    const [selectedCard, setSelectedCard] = useState(null);\n    const [votes, setVotes] = useState({});\n    const [revealed, setRevealed] = useState(false);\n\n    useEffect(() => {\n        const name = state?.playerName || 'Host';\n        socket.emit('joinRoom', { roomId, name });\n\n        socket.on('players', setPlayers);\n        socket.on('votes', setVotes);\n\n        return () => socket.disconnect();\n    }, [roomId, state]);\n\n    const handleVote = (card) => {\n        setSelectedCard(card);\n        socket.emit('vote', { roomId, card });\n    };\n\n    const handleRevealVotes = () => {\n        setRevealed(true);\n    };\n\n    const calculateAverage = () => {\n        const values = Object.values(votes);\n        if (values.length === 0) return 0;\n        return (values.reduce((a, b) => a + b, 0) / values.length).toFixed(2);\n    };\n\n    const allVoted = players.length > 0 && players.every((p) => votes[p.id] !== undefined);\n\n    return (\n        <div className=\"container\">\n            <h1 className=\"room-title\">{state?.roomName || 'Sala'}</h1>\n\n            <div className=\"players\">\n                {players.map((player) => (\n                    <div key={player.id} className=\"player\">\n                        {player.name} {revealed && votes[player.id] !== undefined ? `: ${votes[player.id]}` : 'üÉè'}\n                    </div>\n                ))}\n            </div>\n\n            <div className=\"card-grid\">\n                {cards.map((card) => (\n                    <div\n                        key={card}\n                        className=\"card\"\n                        style={{ backgroundColor: selectedCard === card ? '#4f46e5' : 'white', color: selectedCard === card ? 'white' : 'black' }}\n                        onClick={() => handleVote(card)}\n                    >\n                        {card}\n                    </div>\n                ))}\n            </div>\n\n            {allVoted && !revealed && (\n                <button className=\"reveal-button\" onClick={handleRevealVotes}>\n                    Revelar Votos\n                </button>\n            )}\n\n            {revealed && (\n                <div className=\"result\">\n                    M√©dia: {calculateAverage()}\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default PokerRoom;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}