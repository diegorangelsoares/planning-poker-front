{"ast":null,"code":"var _jsxFileName = \"/home/diego-freire/Documentos/projetos_diego/Planning-Poker/planning-poker-front/src/components/PokerRoom.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport '../App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io('http://localhost:5000'); // Mude de 4000 para 5000\n\nfunction PokerRoom() {\n  _s();\n  const {\n    roomName\n  } = useParams();\n  const [username, setUsername] = useState('');\n  const [users, setUsers] = useState([]);\n  const [voted, setVoted] = useState(false);\n  const [votes, setVotes] = useState({});\n  const [revealed, setRevealed] = useState(false);\n  const [cardSequence, setCardSequence] = useState([]);\n  useEffect(() => {\n    const name = prompt('Digite seu nome');\n    setUsername(name);\n    socket.emit('joinRoom', {\n      roomName,\n      username: name\n    });\n    socket.on('roomData', data => {\n      setUsers(data.users); // Atualiza os participantes\n      setCardSequence(data.sequence || []); // Atualiza a sequência das cartas\n    });\n    socket.on('voteUpdate', data => {\n      setVotes(data.votes);\n      setRevealed(data.revealed);\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, [roomName]);\n  const handleVote = value => {\n    if (!voted && !revealed) {\n      socket.emit('vote', {\n        roomName,\n        username,\n        vote: value\n      });\n      setVoted(true);\n    }\n  };\n  const handleReveal = () => {\n    socket.emit('revealVotes', {\n      roomName\n    });\n  };\n  const average = () => {\n    const values = Object.values(votes).filter(v => !isNaN(v));\n    const total = values.reduce((acc, v) => acc + Number(v), 0);\n    return values.length > 0 ? (total / values.length).toFixed(2) : '-';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Sala: \", roomName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Participantes:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: users.map(user => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [user, \" \", revealed && votes[user] !== undefined ? `- ${votes[user]}` : voted && user === username ? '- Votou' : '']\n      }, user, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cards\",\n      children: cardSequence.map((card, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleVote(card),\n        disabled: voted || revealed,\n        children: card\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), !revealed && Object.keys(votes).length === users.length && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleReveal,\n      children: \"Revelar Votos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }, this), revealed && /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"M\\xE9dia: \", average()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n}\n_s(PokerRoom, \"3zG5h7K6mRgx7yCP6tWp0gx9S0U=\", false, function () {\n  return [useParams];\n});\n_c = PokerRoom;\nexport default PokerRoom;\nvar _c;\n$RefreshReg$(_c, \"PokerRoom\");","map":{"version":3,"names":["React","useEffect","useState","useParams","io","jsxDEV","_jsxDEV","socket","PokerRoom","_s","roomName","username","setUsername","users","setUsers","voted","setVoted","votes","setVotes","revealed","setRevealed","cardSequence","setCardSequence","name","prompt","emit","on","data","sequence","disconnect","handleVote","value","vote","handleReveal","average","values","Object","filter","v","isNaN","total","reduce","acc","Number","length","toFixed","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","user","undefined","card","index","onClick","disabled","keys","_c","$RefreshReg$"],"sources":["/home/diego-freire/Documentos/projetos_diego/Planning-Poker/planning-poker-front/src/components/PokerRoom.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport '../App.css';\n\nconst socket = io('http://localhost:5000');  // Mude de 4000 para 5000\n\nfunction PokerRoom() {\n    const { roomName } = useParams();\n    const [username, setUsername] = useState('');\n    const [users, setUsers] = useState([]);\n    const [voted, setVoted] = useState(false);\n    const [votes, setVotes] = useState({});\n    const [revealed, setRevealed] = useState(false);\n    const [cardSequence, setCardSequence] = useState([]);\n\n    useEffect(() => {\n        const name = prompt('Digite seu nome');\n        setUsername(name);\n        socket.emit('joinRoom', { roomName, username: name });\n\n        socket.on('roomData', (data) => {\n            setUsers(data.users);       // Atualiza os participantes\n            setCardSequence(data.sequence || []);  // Atualiza a sequência das cartas\n        });\n\n        socket.on('voteUpdate', (data) => {\n            setVotes(data.votes);\n            setRevealed(data.revealed);\n        });\n\n        return () => {\n            socket.disconnect();\n        };\n    }, [roomName]);\n\n    const handleVote = (value) => {\n        if (!voted && !revealed) {\n            socket.emit('vote', { roomName, username, vote: value });\n            setVoted(true);\n        }\n    };\n\n    const handleReveal = () => {\n        socket.emit('revealVotes', { roomName });\n    };\n\n    const average = () => {\n        const values = Object.values(votes).filter((v) => !isNaN(v));\n        const total = values.reduce((acc, v) => acc + Number(v), 0);\n        return values.length > 0 ? (total / values.length).toFixed(2) : '-';\n    };\n\n    return (\n        <div className=\"container\">\n            <h2>Sala: {roomName}</h2>\n            <h3>Participantes:</h3>\n            <ul>\n                {users.map((user) => (\n                    <li key={user}>\n                        {user} {revealed && votes[user] !== undefined ? `- ${votes[user]}` : voted && user === username ? '- Votou' : ''}\n                    </li>\n                ))}\n            </ul>\n            <div className=\"cards\">\n                {cardSequence.map((card, index) => (\n                    <button key={index} onClick={() => handleVote(card)} disabled={voted || revealed}>\n                        {card}\n                    </button>\n                ))}\n            </div>\n            {!revealed && Object.keys(votes).length === users.length && (\n                <button onClick={handleReveal}>Revelar Votos</button>\n            )}\n            {revealed && (\n                <h3>Média: {average()}</h3>\n            )}\n        </div>\n    );\n}\n\nexport default PokerRoom;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}