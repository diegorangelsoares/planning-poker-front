{"ast":null,"code":"var _jsxFileName = \"/home/diego-freire/Documentos/projetos_diego/Planning-Poker/planning-poker-app/planning-poker-front/src/components/PokerRoom.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport socket from '../socket';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PokerRoom = () => {\n  _s();\n  const {\n    roomId\n  } = useParams();\n  const [room, setRoom] = useState({\n    players: {},\n    votesRevealed: false\n  });\n  const numbers = Array.from({\n    length: 31\n  }, (_, i) => i * 2);\n  useEffect(() => {\n    socket.on('room-update', updatedRoom => {\n      setRoom(updatedRoom);\n    });\n    return () => {\n      socket.off('room-update');\n    };\n  }, []);\n  const handleVote = vote => {\n    socket.emit('vote', {\n      roomId,\n      vote\n    });\n  };\n  const handleReveal = () => {\n    socket.emit('reveal-votes', roomId);\n  };\n  const votesArray = Object.values(room.players || {});\n  const allVoted = votesArray.length > 0 && votesArray.every(player => player.vote !== null);\n  const calculateAverage = () => {\n    const total = votesArray.reduce((sum, p) => {\n      var _p$vote;\n      return sum + ((_p$vote = p.vote) !== null && _p$vote !== void 0 ? _p$vote : 0);\n    }, 0);\n    return (total / votesArray.length).toFixed(2);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Sala: \", room.roomName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 20\n      },\n      children: votesArray.map((player, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [player.name, \": \", room.votesRevealed ? player.vote : 'üÉè']\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'center'\n      },\n      children: numbers.map(num => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleVote(num),\n        style: {\n          width: 60,\n          height: 90,\n          margin: 5,\n          fontSize: 20\n        },\n        children: num\n      }, num, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), allVoted && !room.votesRevealed && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleReveal,\n      style: {\n        marginTop: 20\n      },\n      children: \"Revelar Votos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this), room.votesRevealed && /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"M\\xE9dia dos Votos: \", calculateAverage()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 9\n  }, this);\n};\n_s(PokerRoom, \"Cior07E6sJzXW8R1XPQ4Uo6eZJY=\", false, function () {\n  return [useParams];\n});\n_c = PokerRoom;\nexport default PokerRoom;\nvar _c;\n$RefreshReg$(_c, \"PokerRoom\");","map":{"version":3,"names":["useEffect","useState","useParams","socket","jsxDEV","_jsxDEV","PokerRoom","_s","roomId","room","setRoom","players","votesRevealed","numbers","Array","from","length","_","i","on","updatedRoom","off","handleVote","vote","emit","handleReveal","votesArray","Object","values","allVoted","every","player","calculateAverage","total","reduce","sum","p","_p$vote","toFixed","style","textAlign","children","roomName","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","map","idx","name","display","flexWrap","justifyContent","num","onClick","width","height","margin","fontSize","marginTop","_c","$RefreshReg$"],"sources":["/home/diego-freire/Documentos/projetos_diego/Planning-Poker/planning-poker-app/planning-poker-front/src/components/PokerRoom.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport socket from '../socket';\n\nconst PokerRoom = () => {\n    const { roomId } = useParams();\n    const [room, setRoom] = useState({ players: {}, votesRevealed: false });\n\n    const numbers = Array.from({ length: 31 }, (_, i) => i * 2);\n\n    useEffect(() => {\n        socket.on('room-update', (updatedRoom) => {\n            setRoom(updatedRoom);\n        });\n\n        return () => {\n            socket.off('room-update');\n        };\n    }, []);\n\n    const handleVote = (vote) => {\n        socket.emit('vote', { roomId, vote });\n    };\n\n    const handleReveal = () => {\n        socket.emit('reveal-votes', roomId);\n    };\n\n    const votesArray = Object.values(room.players || {});\n    const allVoted = votesArray.length > 0 && votesArray.every(player => player.vote !== null);\n\n    const calculateAverage = () => {\n        const total = votesArray.reduce((sum, p) => sum + (p.vote ?? 0), 0);\n        return (total / votesArray.length).toFixed(2);\n    };\n\n    return (\n        <div style={{ textAlign: 'center' }}>\n            <h2>Sala: {room.roomName}</h2>\n\n            <div style={{ marginBottom: 20 }}>\n                {votesArray.map((player, idx) => (\n                    <div key={idx}>\n                        {player.name}: {room.votesRevealed ? player.vote : 'üÉè'}\n                    </div>\n                ))}\n            </div>\n\n            <div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'center' }}>\n                {numbers.map(num => (\n                    <button\n                        key={num}\n                        onClick={() => handleVote(num)}\n                        style={{ width: 60, height: 90, margin: 5, fontSize: 20 }}\n                    >\n                        {num}\n                    </button>\n                ))}\n            </div>\n\n            {allVoted && !room.votesRevealed && (\n                <button onClick={handleReveal} style={{ marginTop: 20 }}>\n                    Revelar Votos\n                </button>\n            )}\n\n            {room.votesRevealed && (\n                <h3>M√©dia dos Votos: {calculateAverage()}</h3>\n            )}\n        </div>\n    );\n};\n\nexport default PokerRoom;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}